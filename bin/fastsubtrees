#!/usr/bin/env python3
"""
Construct, modify or query a tree data structure for fast subtree queries.

Usage:
  fastsubtrees [attr] <command> [<args>...]

Available commands:
  construct         Construct the tree data structure and save it to file
  update            Update an existing tree data structure
  attribute         Create, update or delete node attributes
  query             List node IDs and/or attributes in the subtree under a node

See 'fastsubtrees <command> --help' for more information on a specific command.

"""
from docopt import docopt
from fastsubtrees import VERSION, _scripts_support

if __name__ == '__main__':
  args = docopt(__doc__, version=VERSION, options_first=True)
  command = args['<command>']
  if command == 'construct':
    import fastsubtrees.commands.construct as cmd
  elif command == 'query':
    import fastsubtrees.commands.query as cmd
  elif command == 'update':
    import fastsubtrees.commands.update as cmd
  elif command == 'attribute':
    import fastsubtrees.commands.attribute as cmd
  else:
    exit(f"'{command}' is not a fastsubtrees command.\n"+\
        "See fastsubtrees --help.")
  argv = [command] + args["<args>"]
  cmd_args = docopt(cmd.__doc__, version=VERSION, argv=argv)
  _scripts_support.setup_verbosity(cmd_args)
  cmd.main(cmd_args)
