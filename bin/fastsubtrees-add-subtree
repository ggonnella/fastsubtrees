#!/usr/bin/env python3
"""
Parse a given tabular file and add a new leaf node
to the given tree

Usage:
  fastsubtrees-add-subtree [options] <inputfile> <nodefile>

Arguments:
  <inputfile>       TSV file containing elements and parents
  <nodefile>        File containing the tree data

Options:
  --quiet      be quiet
  --debug      print debug messages
"""

from docopt import docopt
from fastsubtrees import Tree, _scripts_support


def main(args):
    tree = Tree()
    with open(args["<inputfile>"]) as file:
        for f in file:
            fields = f.rstrip().split('\t')
            element = int(fields[0])
            parent = int(fields[1])
            tree.add_node(args["<nodefile>"], parent, element)



if __name__ == "__main__":
    args = docopt(__doc__, version="0.1")
    _scripts_support.setup_verbosity(args)
    main(args)
